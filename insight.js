"use strict";!function(c,i){var e=c(".ins-search"),t=e.find(".ins-search-input"),l=e.find(".ins-section-wrapper"),u=e.find(".ins-section-container");function r(t,n,e,a,s){return c("<div>").addClass("ins-selectable").addClass("ins-search-item").append(c("<header>").append(c("<i>").addClass("fa").addClass("fa-"+t)).append(c("<span>").addClass("ins-title").text(null!=n&&""!==n?n:i.TRANSLATION.UNTITLED)).append(e?c("<span>").addClass("ins-slug").text(e):null)).append(a?c("<p>").addClass("ins-search-preview").text(a):null).attr("data-url",s)}function a(n,t){var e;if(0===t.length)return null;var a,s=i.TRANSLATION[n];switch(n){case"POSTS":case"PAGES":e=t.map(function(t){return r("file",t.title,null,t.text.slice(0,150),t.link)});break;case"CATEGORIES":case"TAGS":e=t.map(function(t){return r("CATEGORIES"===n?"folder":"tag",t.name,t.slug,null,t.link)});break;default:return null}return a=s,c("<section>").addClass("ins-section").append(c("<header>").addClass("ins-section-header").text(a)).append(e)}function o(t){return t.split(" ").filter(function(t){return!!t}).map(function(t){return t.toUpperCase()})}function p(t,e,a){var n=o(t);return n.filter(function(n){return 0<a.filter(function(t){return!!Object.prototype.hasOwnProperty.call(e,t)&&-1<e[t].toUpperCase().indexOf(n)}).length}).length===n.length}function f(t,s,n,i){var r=0;return o(t).forEach(function(t){var a=new RegExp(t,"img");n.forEach(function(t,n){var e;Object.prototype.hasOwnProperty.call(s,t)&&(e=s[t].match(a),r+=e?e.length*i[n]:0)})}),r}function s(t,n){var e,a,s={post:function(t){return f(e,t,["title","text"],[3,1])},page:function(t){return f(e,t,["title","text"],[3,1])},category:function(t){return f(e,t,["name","slug"],[1,1])},tag:function(t){return f(e,t,["name","slug"],[1,1])}},i=(a=e=n,{post:function(t){return p(a,t,["title","text"])},page:function(t){return p(a,t,["title","text"])},category:function(t){return p(a,t,["name","slug"])},tag:function(t){return p(a,t,["name","slug"])}}),r=t.posts,o=t.pages,c=t.tags,l=t.categories;return{posts:r.filter(i.post).sort(function(t,n){return s.post(n)-s.post(t)}).slice(0,5),pages:o.filter(i.page).sort(function(t,n){return s.page(n)-s.page(t)}).slice(0,5),categories:l.filter(i.category).sort(function(t,n){return s.category(n)-s.category(t)}).slice(0,5),tags:c.filter(i.tag).sort(function(t,n){return s.tag(n)-s.tag(t)}).slice(0,5)}}function n(t){var n=c.makeArray(u.find(".ins-selectable")),e=-1;n.forEach(function(t,n){c(t).hasClass("active")&&(e=n)});var a,s,i,r,o=(n.length+e+t)%n.length;c(n[e]).removeClass("active"),c(n[o]).addClass("active"),0!==(a=c(n[o])).length&&(s=l[0].clientHeight,i=a.position().top-l.scrollTop(),(r=a[0].clientHeight+a.position().top)>s+l.scrollTop()&&l.scrollTop(r-l[0].clientHeight),i<0&&l.scrollTop(a.position().top))}function d(t){t&&t.length&&(location.href=t.attr("data-url"))}e.parent().remove(".ins-search"),c("body").append(e),c.getJSON(i.CONTENT_URL,function(n){"#ins-search"===location.hash.trim()&&e.addClass("show"),t.on("input",function(){var t=c(this).val();!function(t){for(var n in u.empty(),t)u.append(a(n.toUpperCase(),t[n]))}(s(n,t))}),t.trigger("input")});var h=!1;c(document).on("click focus",".navbar-main .search",function(){e.addClass("show"),e.find(".ins-search-input").focus()}).on("click touchend",".ins-search-item",function(t){"click"!==t.type&&!h||(d(c(this)),h=!1)}).on("click touchend",".ins-close",function(t){"click"!==t.type&&!h||(c(".navbar-main").css("pointer-events","none"),setTimeout(function(){c(".navbar-main").css("pointer-events","auto")},400),e.removeClass("show"),h=!1)}).on("keydown",function(t){if(e.hasClass("show"))switch(t.keyCode){case 27:e.removeClass("show");break;case 38:n(-1);break;case 40:n(1);break;case 13:d(u.find(".ins-selectable.active").eq(0))}}).on("touchstart",function(t){h=!0}).on("touchmove",function(t){h=!1})}(jQuery,window.INSIGHT_CONFIG);